<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="index.css">
  <title>10s count</title>
</head>
<body ontouchstart="">
  <div id="reset"></div>
  <div class="asset">
    カウントボイスは 
    <a href="http://www14.big.or.jp/~amiami/happy/">あみたろの声素材工房</a>
    の声素材を使用しています。
  </div>
  <button id="start">START</button>
  <div id="time">10</div>
<script charset="UTF-8">
var time  = document.getElementById('time');
var start = document.getElementById('start');
var reset = document.getElementById('reset');

var intervalID, count = 10;

var audio = new Audio("countdownVoice.wav");

start.addEventListener('click',function () {
  start.style.display = 'none';
  reset.style.display = 'block';
  time.style.display  = 'inline-block';

  // カウント開始
  audio.play();
  intervalID = window.setInterval(countDown,1000);
});

// カウントダウン
function countDown () {
  if(count == 11){ 
    audio.currentTime = 0;
    reset.classList.remove('clicked');
  }

  count--;
  time.textContent = count;

  if(count <= 0){
    clearInterval(intervalID); 
    return;
  }
}

// カウントリセット
reset.addEventListener('click',function () {
  reset.classList.add('clicked');
  count = 11;
});
</script>
</body>
</html>